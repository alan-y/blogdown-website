[{"authors":["admin"],"categories":null,"content":"I am a research fellow at Glasgow Caledonian University and an analyst at Health Protection Scotland. My main research interests relate to the epidemiology and prevention of blood borne viruses as well as the evaluation of policies related to this field. I provide analytical and statistical support for a broad range of blood borne viruses including hepatitis B, hepatitis C and HIV. I am also a supporter for the widespread adoption of open-source statistical software within the public sector in Scotland, particularly for the use of R.\nAll views and opinions expressed here are my own. \n","date":1554076800,"expirydate":-62135596800,"kind":"taxonomy","lang":"en","lastmod":1554076800,"objectID":"2525497d367e79493fd32b198b28f040","permalink":"/authors/admin/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/authors/admin/","section":"authors","summary":"I am a research fellow at Glasgow Caledonian University and an analyst at Health Protection Scotland. My main research interests relate to the epidemiology and prevention of blood borne viruses as well as the evaluation of policies related to this field. I provide analytical and statistical support for a broad range of blood borne viruses including hepatitis B, hepatitis C and HIV. I am also a supporter for the widespread adoption of open-source statistical software within the public sector in Scotland, particularly for the use of R.","tags":null,"title":"Alan Yeung","type":"authors"},{"authors":null,"categories":null,"content":" Flexibility This feature can be used for publishing content such as:\n Online courses Project or software documentation Tutorials  The courses folder may be renamed. For example, we can rename it to docs for software/project documentation or tutorials for creating an online course.\nDelete tutorials To remove these pages, delete the courses folder and see below to delete the associated menu link.\nUpdate site menu After renaming or deleting the courses folder, you may wish to update any [[main]] menu links to it by editing your menu configuration at config/_default/menus.toml.\nFor example, if you delete this folder, you can remove the following from your menu configuration:\n[[main]] name = \u0026quot;Courses\u0026quot; url = \u0026quot;courses/\u0026quot; weight = 50  Or, if you are creating a software documentation site, you can rename the courses folder to docs and update the associated Courses menu configuration to:\n[[main]] name = \u0026quot;Docs\u0026quot; url = \u0026quot;docs/\u0026quot; weight = 50  Update the docs menu If you use the docs layout, note that the name of the menu in the front matter should be in the form [menu.X] where X is the folder name. Hence, if you rename the courses/example/ folder, you should also rename the menu definitions in the front matter of files within courses/example/ from [menu.example] to [menu.\u0026lt;NewFolderName\u0026gt;].\n","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"59c3ce8e202293146a8a934d37a4070b","permalink":"/courses/example/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/courses/example/","section":"courses","summary":"Learn how to use Academic's docs layout for publishing online courses, software documentation, and tutorials.","tags":null,"title":"Overview","type":"docs"},{"authors":null,"categories":null,"content":" In this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nTip 1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\nTip 2 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1557010800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1557010800,"objectID":"74533bae41439377bd30f645c4677a27","permalink":"/courses/example/example1/","publishdate":"2019-05-05T00:00:00+01:00","relpermalink":"/courses/example/example1/","section":"courses","summary":"In this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nTip 1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim.","tags":null,"title":"Example Page 1","type":"docs"},{"authors":null,"categories":null,"content":" Here are some more tips for getting started with Academic:\nTip 3 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\nTip 4 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1557010800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1557010800,"objectID":"1c2b5a11257c768c90d5050637d77d6a","permalink":"/courses/example/example2/","publishdate":"2019-05-05T00:00:00+01:00","relpermalink":"/courses/example/example2/","section":"courses","summary":"Here are some more tips for getting started with Academic:\nTip 3 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus.","tags":null,"title":"Example Page 2","type":"docs"},{"authors":null,"categories":["R"],"content":"\r\rA Learning Exercise\rWorkflow\r\r\rI created my first ever R package and got it released onto CRAN in March 2019. It’s taken me a while to get round to actually writing about this which tells me that despite many years of trying to overcome procrastination, I’m obviously still not there! The package is actually an RStudio addin called objectremover that helps you to quickly remove objects stored in memory (specifically objects saved in the Global environment) within an R session. The main features include removing objects by\n\rStarting pattern of object name\rEnding pattern of object name\rRegular expression\rObject type (dataframe, function and other)\r\rThis is a quick demo of objectremover in action.\nI made sure to include a couple of safety features to help ensure that you don’t remove objects by mistake. Firstly, it displays what objects will be removed based on the options you’ve selected in real-time and when you click ‘Done’, another warning popup box appears to get a second confirmation that you want to remove these objects. I put this warning popup in as you could remove all saved objects (perhaps by mistake) if, for example, you use a regular expression with no pattern.\nI recently also got objectremover added to the list of addins started and maintained by Dean Attali.\nA Learning Exercise\rCreating this package was largely a learning exercise for me and I really learned loads in the process. To create the package, I tried the usethis package for the first time to help get various things set up. When I got to the stage where the package was mostly developed, I tested that the package builds successfully in various operating systems and R versions using Travis CI and the R-hub builder (again, this was the first time I’ve used these tools). A continous integration service like Travis is useful for ensuring that the package still builds properly whenever you make changes to the package and push onto Github. I even had a go at creating a hex sticker for the package (with the help of the hexsticker package) and anybody that knows me at all knows that this isn’t the sort of thing I’m good at! But I’m happy I gave it a go as that’s the only way to get better.\nWhen I submitted to CRAN, the package got knocked back a few times but I followed the wise advice of Hadley Wickham to not take any criticism personally (particularly as the CRAN maintainers are very busy people and have a hard job) and just tackled all the obstacles in a respectful manner. This advice probably applies to many things in life beyond building R packages so I try to follow this approach as much as humanly possible (but as I am actually human, it stands to reason that I still fail in this regard – and more often than I’d like as well unfortunately!).\n\rWorkflow\rThe idea for the package came about as I tend to create a lot of temporary objects in R as I work through analyses and I just wanted a quick way to remove these objects. I often call these objects with names starting with the letter ‘z’ so that they will be easy to spot. This was something I learned from my former PhD supervisor and has actually become pretty invaluable as naming things is something that can sometimes cause me more stress and take up more energy than you would imagine for something this basic and fundamental! So having a way of removing the need for this decision-making helps to focus on solving problems quickly rather than putting energy into things such as naming objects.\nHaving said this, I do always go through my code carefully after I’ve solved the problems I’m working on and tidy the script up to make sure I can understand everything I’ve done. This process is sometimes known as code refactoring. It is something that is sometimes overlooked but is really important for ensuring that you and others can better understand what a script is doing. This quote sums up the benefits pretty well.\n\rBy continuously improving the design of code, we make it easier and easier to work with. This is in sharp contrast to what typically happens: little refactoring and a great deal of attention paid to expediently adding new features. If you get into the hygienic habit of refactoring continuously, you’ll find that it is easier to extend and maintain code.\n— Joshua Kerievsky\n\rPart of what I do for this includes putting in section breaks into my script (in RStudio, the shortcut to do this is ctrl+shift+R) to split things into more manageable blocks. I’ll also give meaningful names to objects that I do want to track, particularly for longer projects. For example, there may be several data processing stages involved in going from a raw dataset up to the dataset you use for analysis. I will usually create a number of temporary objects (beginning with ‘z’) that help me get to the analysis dataset (often via various joins between datasets). In this case, the raw and analysis datasets would get meaningful names and the temporary objects could be removed. At the end, I may save the raw and analysis datasets into an R workspace (or as RDS format) that can be easily loaded into scripts created for other parts of a long project.\nAnyway that’s just an example of a workflow that I sometimes use and find pretty efficient for long projects. I’m sure there are many other great ways to work efficiently in creating outputs for long projects so if you know of some, please let me know as I always like to hear about ways to work efficiently in R. Oh and of course, I hope some people find objectremover useful!\n\r","date":1565568000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1565568000,"objectID":"04d847e5ca608b8a74d4baa67c346977","permalink":"/post/objectremover-rstudio-addin/","publishdate":"2019-08-12T00:00:00Z","relpermalink":"/post/objectremover-rstudio-addin/","section":"post","summary":"A Learning Exercise\rWorkflow\r\r\rI created my first ever R package and got it released onto CRAN in March 2019. It’s taken me a while to get round to actually writing about this which tells me that despite many years of trying to overcome procrastination, I’m obviously still not there! The package is actually an RStudio addin called objectremover that helps you to quickly remove objects stored in memory (specifically objects saved in the Global environment) within an R session.","tags":["RStudio","Addins"],"title":"objectremover RStudio Addin","type":"post"},{"authors":null,"categories":["R"],"content":"\r\rAim\rCreate a dummy database\rTest dbplyr’s SQL translation\rModify dbplyr’s SQL translation\rTesting the dbplyr hack\rConcluding notes\r\r\rAt the end of my first post on CKAN discussing how to use the CKAN API to extract data from the NHS open data platform directly into R, I talked about how it would be neat to write some wrapper functions to make this process a little simpler. Well another idea came to my mind that I think would be even more cool to get working – would it be possible to hack the SQL translation from dbplyr to make it work effectively for extracting data from CKAN?\nJust for background info, dbplyr is a package that lets you use dplyr code to interact with databases (a database backend for dplyr), which saves you learning SQL (I still recommend that people learn SQL though as it is likely to come in useful anyway!). One of the conveniences of using dbplyr is that you can take advantage of some of the dplyr’s helper functions (e.g starts_with(), ends_with()) to assist with tasks such as selecting variables – a task which can be quite tedious in SQL as you must list all of the variables you want to extract.\nAim\rThe aim here is not to be too ambitious for the hack but to just get the select() and filter() functions to work for this hack. My feeling is that if you can get these features working, then you should be able to easily extract just the variables and rows of data you want from CKAN using dplyr code and this is hopefully sufficient for most people. This should be a good starting point for helping people to not download entire datasets when they don’t need to. Anyway, with the brief intro out of the way, let’s see if we can get this little hack working!\n\rCreate a dummy database\rSince datasets held on CKAN will not be identified by dbplyr as a ‘database’, we have to create a sort of dummy database within R so that it identifies a CKAN resource as a database. To do this, I created a function called ckan_nhs_init(). This function simply downloads one row of data from a CKAN resource and stores this in an in-memory SQLite database. The key thing here is that extracting one row of data will give us a list of all the variable names for the dummy database. In the code below, please note that I have loaded some required packages to make the function work (if it turns out later that this idea is actually not bad, I’ll write up the code more appropriately for packaging up).\nlibrary(tidyverse)\rlibrary(dbplyr)\rlibrary(httr)\rlibrary(jsonlite)\rckan_nhs_init \u0026lt;- function(id) {\rurl \u0026lt;- paste0(\u0026quot;https://www.opendata.nhs.scot/api/3/action/\u0026quot;,\r\u0026quot;datastore_search?\u0026quot;,\r\u0026quot;resource_id=\u0026quot;, id,\r\u0026quot;\u0026amp;limit=1\u0026quot;)\rstatus \u0026lt;- status_code(GET(url))\rstopifnot(str_detect(status, \u0026quot;^2\u0026quot;))\rdf \u0026lt;- fromJSON(url)$result$records\rcopy_to(src_memdb(), df, name = id, overwrite = TRUE)\r}\r\rTest dbplyr’s SQL translation\rAfter creating a dummy database (and thus, successfully fooling dbplyr into believing that a CKAN resource is a database), we have to make some modifications to the SQL translation from dbplyr so that the SQL query actually works for interacting with the CKAN API. First let’s test a couple of simple queries to see what dbplyr’s SQL translation produces. We’ll use the Data Zone (2011) Population Estimates dataset (resource ID c505f490-c201-44bd-abd1-1bd7a64285ee) for testing throughout this post. So what does the SQL translation look like when we just use select()?\nid \u0026lt;- \u0026quot;c505f490-c201-44bd-abd1-1bd7a64285ee\u0026quot;\rckan_nhs_init(id) %\u0026gt;% select(Year, DZ2011) %\u0026gt;% show_query()\r# \u0026lt;SQL\u0026gt;\r# SELECT `Year`, `DZ2011`\r# FROM `c505f490-c201-44bd-abd1-1bd7a64285ee`\rImmediately I can see that the CKAN API isn’t going to like those backticks (`) around the variable and database names so we’ll have to remove them. We’ll also have to remove the line breaks (\\n). Now let’s test the SQL translation for filter().\nckan_nhs_init(id) %\u0026gt;%\rfilter(Year == 2011L)\r# \u0026lt;SQL\u0026gt;\r# SELECT *\r# FROM `c505f490-c201-44bd-abd1-1bd7a64285ee`\r# WHERE (`Year` = 2011)\rNow I can see that the CKAN API isn’t going to like those brackets around the WHERE statement so we’ll also have to remove them. Lastly let’s test the translation for a select() combined with a filter().\n# select() and then filter()\rckan_nhs_init(id) %\u0026gt;% select(Year, DZ2011) %\u0026gt;% filter(Year == 2011L) %\u0026gt;% show_query()\r# \u0026lt;SQL\u0026gt;\r# SELECT *\r# FROM (SELECT `Year`, `DZ2011`\r# FROM `c505f490-c201-44bd-abd1-1bd7a64285ee`)\r# WHERE (`Year` = 2011)\r# filter() and then select()\rckan_nhs_init(id) %\u0026gt;% filter(Year == 2011L) %\u0026gt;% select(Year, DZ2011) %\u0026gt;% show_query()\r# \u0026lt;SQL\u0026gt;\r# SELECT `Year`, `DZ2011`\r# FROM `c505f490-c201-44bd-abd1-1bd7a64285ee`\r# WHERE (`Year` = 2011)\rFrom here, we can see that when using filter() and then select(), the query looks fairly concise but when using select() and then filter(), we have some work to do to remove the unnecessary SELECT * FROM at the beginning (note that this SQL is perfectly good normally but it won’t be for the CKAN API). In any case, I think we now have all the information we need to modify dbplyr’s SQL translation to make it work for CKAN.\n\rModify dbplyr’s SQL translation\rUsing the information just attained, I created the ckan_nhs_extract() function to make the required modifications to the SQL translation. Note that in the function I use sql_render() instead of show_query() as I need the SQL query as a string variable in R rather than just printed to the console. I’ve also added a warning message using cat() to warn the user that some queries may take a while.\nckan_nhs_extract \u0026lt;- function(db_qry) {\rdb_qry \u0026lt;- sql_render(db_qry) %\u0026gt;%\rstr_replace_all(\u0026quot;`\u0026quot;, \u0026#39;\u0026quot;\u0026#39;) %\u0026gt;%\rstr_replace_all(\u0026quot;\\n\u0026quot;, \u0026quot; \u0026quot;)\r# Check if there is more than one SELECT statement\rn_select \u0026lt;- str_count(db_qry, \u0026quot;SELECT\u0026quot;)\r# Remove unnecessary SELECT statement if needed\rif (n_select \u0026gt; 1) {\rdb_qry \u0026lt;- str_remove(db_qry, \u0026quot;^(SELECT \\\\* FROM )\u0026quot;)\r}\rdb_qry \u0026lt;- str_remove_all(db_qry, \u0026quot;\\\\(|\\\\)\u0026quot;)\rdb_qry \u0026lt;- URLencode(db_qry)\rdb_qry \u0026lt;- paste0(\u0026quot;https://www.opendata.nhs.scot/api/3/action/\u0026quot;,\r\u0026quot;datastore_search_sql?\u0026quot;,\r\u0026quot;sql=\u0026quot;,\rdb_qry)\rcat(\u0026quot;Extracting: this may take a while\\n\\n\u0026quot;)\ras_tibble(fromJSON(db_qry)$result$records)\r}\r\rTesting the dbplyr hack\rTo test this hack, we will make a simple query using select() and then filter() which is the more complicated scenario.\nckan_nhs_init(id) %\u0026gt;%\rselect(Year, DZ2011) %\u0026gt;%\rfilter(Year == 2011, DZ2011 == \u0026quot;S92000003\u0026quot;) %\u0026gt;%\rckan_nhs_extract()\r# Extracting: this may take a while\r# # # A tibble: 2 x 2\r# DZ2011 Year # \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt;\r# 1 S92000003 2011 # 2 S92000003 2011 \rThis produces the desired result so it’s a job well done for now!\n\rConcluding notes\rThis hack needs a lot more testing as there are probably lots of things that could potentially break it (but obviously I’m hoping not!). There’s also a niggling issue in that I don’t yet know how to remove an in-memory SQLite database from R (or whether this is even possible) which I guess should be done after you’ve extracted the data you need just to clean things up nicely in R. But in saying that, it likely isn’t a big issue as src_memdb() has been specifically designed for creating a temporary in-memory database so everything will of course, be cleaned up after you exit your R session anyway. If this hack turns out to be useful and doesn’t break too easily, I may put in a bit of effort to package it up onto Github later. Please let me know what you think if you ever use it!\n\r","date":1562457600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1562457600,"objectID":"faddaf0ad6c857da1cd63add5253adea","permalink":"/post/ckan-dbplyr/","publishdate":"2019-07-07T00:00:00Z","relpermalink":"/post/ckan-dbplyr/","section":"post","summary":"Aim\rCreate a dummy database\rTest dbplyr’s SQL translation\rModify dbplyr’s SQL translation\rTesting the dbplyr hack\rConcluding notes\r\r\rAt the end of my first post on CKAN discussing how to use the CKAN API to extract data from the NHS open data platform directly into R, I talked about how it would be neat to write some wrapper functions to make this process a little simpler.","tags":["API","open-data"],"title":"Hacking dbplyr for CKAN","type":"post"},{"authors":null,"categories":["R"],"content":"\r\rPreamble\rOpen Data in Scotland\rQuerying CKAN\rQuerying with Custom JSON\rQuerying with SQL\r\rConclusions and Further Ideas\r\r\rPreamble\rI’ve got lots of rough pieces of R code written as I’ve been exploring/testing various things in the past. A lot of this is currently stored in a pretty disorganised fashion so I thought it would be a good idea to start writing some of these up into blog posts – at the very least, this should make it easier for me to find things later! To start with, I am writing a short post here about how to download data from the CKAN API directly into R – CKAN is an open source data portal platform (basically a tool for making open data websites) and the reason I became interested in it is because this is the platform that NHS Scotland has chosen to host their open data.\n\rOpen Data in Scotland\rIt is becoming increasingly important for public sector organisations to make their data open. In Scotland, this is clear from the Scottish Government’s open data strategy. They believe that providing open data not only aids transparency, but should also result in wider social and economic benefits in the long run. My opinion generally matches this but I feel that one thing to be wary of is the potential for users to interpret data incorrectly so therefore I feel it is absolutely crucial to provide as much information as possible about the datasets (i.e. provide comprehensive metadata). On balance, the upsides of providing open data should definitely outweigh the downsides, particularly if pragmatic steps are taken to mitigate potential issues such as using the data incorrectly which can lead to producing misleading analyses.\nMuch work needs to be done on the open data front in Scotland. The level of open data provision by organisations in Scotland is currently lagging behind other parts of the UK in terms of the number of open datasets available but also in terms of how up-to-date the datasets provided are (see this blog post written in February 2019 by Ian Watt for more on this). Encouragingly though the situation is improving. NHS Scotland is contributing to this improvement by launching their open data platform (which I will simply refer to as CKAN from hereafter). All of the data held on this platform is licensed under the UK Open Government Licence (OGL). What you can and can’t do with the data is well described there in detail but to me, the gist of it seems to be that you can more or less do what you want with the data as long as you properly acknowledge the source (please read the detail though rather than just taking my word for it!).\n\rQuerying CKAN\rEach dataset held on CKAN is assigned a resource ID which uniquely identifies it and to make a query on a particular dataset, you will need to know this. The resource ID can be found in the Additional Information section once you are on a dataset’s page. As an example, let’s say we are interested in downloading data about Data Zone (2011) Population Estimates (this gives data on population estimates for all 6,976 data zones (2011) in Scotland from 2011 to 2017), then, the resource ID for this is c505f490-c201-44bd-abd1-1bd7a64285ee. Note that this resource ID is also contained in the weblink for the dataset so you do not actually need to navigate down to the Additional Information section to find it.\nThere are three querying methods that you can use which are Custom JSON, SQL and HTSQL. Each of these methods supports different features but I will only discuss some basic querying using Custom JSON and SQL here. The basic idea of making a query on the CKAN API is that you build this into the web URL and the form of the URL will depend on the querying method you decide to use.\nQuerying with Custom JSON\rFor Custom JSON, the URL should take the form\nhttps://www.opendata.nhs.scot/api/3/action/ +\ndatastore_search? +\nresource_id=long-id-number +\n\u0026amp;your-CustomJSON-query\nLet’s test this in R by downloading the Data Zone (2011) Population Estimates dataset. Two R packages are required to help with this: httr and jsonlite. The httr package is needed to work with the API and jsonlite is needed to convert the downloaded JSON data into an R object. I will also load the tidyverse package for good measure!\nlibrary(httr)\rlibrary(jsonlite)\rlibrary(tidyverse)\rurl \u0026lt;- paste0(\u0026quot;https://www.opendata.nhs.scot/api/3/action/\u0026quot;,\r\u0026quot;datastore_search?\u0026quot;,\r\u0026quot;resource_id=c505f490-c201-44bd-abd1-1bd7a64285ee\u0026quot;)\rpage \u0026lt;- GET(url) # API request\rstatus_code(page) # # Check that the call is successful\r# [1] 200\r# This means it was successful\r# Status codes:\r# 1XX - Informational\r# 2XX - Success!\r# 3XX - Client Error (something’s not right on your end)\r# 4XX - Server Error (something’s not right on their end)\r# Download the JSON data and convert to an R list\rdz2011_list \u0026lt;- fromJSON(url)\r# Extract the actual data from the list\rdz2011 \u0026lt;- dz2011_list$result$records\rglimpse(dz2011, width = 50)\r# Observations: 100\r# Variables: 97\r# $ `_id` \u0026lt;int\u0026gt; 178, 179, 180, 181, 182, 18...\r# $ Year \u0026lt;int\u0026gt; 2011, 2011, 2011, 2011, 201...\r# $ DZ2011 \u0026lt;chr\u0026gt; \u0026quot;S01006593\u0026quot;, \u0026quot;S01006594\u0026quot;, \u0026quot;...\r# $ DZ2011QF \u0026lt;chr\u0026gt; \u0026quot; \u0026quot;, \u0026quot; \u0026quot;, \u0026quot; \u0026quot;, \u0026quot; \u0026quot;, \u0026quot; \u0026quot;, \u0026quot; ...\r# $ Sex \u0026lt;chr\u0026gt; \u0026quot;Female\u0026quot;, \u0026quot;Male\u0026quot;, \u0026quot;Female\u0026quot;,...\r# $ AllAges \u0026lt;int\u0026gt; 325, 252, 296, 478, 454, 36...\r# $ Age0 \u0026lt;int\u0026gt; 2, 2, 6, 8, 2, 4, 4, 3, 1, ...\r# $ Age1 \u0026lt;int\u0026gt; 4, 4, 0, 3, 4, 2, 6, 1, 3, ...\r# $ Age2 \u0026lt;int\u0026gt; 2, 2, 3, 1, 4, 4, 4, 1, 2, ...\r# $ Age3 \u0026lt;int\u0026gt; 6, 1, 0, 5, 1, 4, 4, 2, 1, ...\rNote that when I used the glimpse() function, I’ve only shown the first 10 variables as this dataset contains 97 variables and I wanted to keep the output fairly concise (I will do the same for the rest of the examples in this post where appropriate). A further thing to note is that the default setting using Custom JSON is to download only the first 100 records from the dataset which you can also see from the number of observations in the output of glimpse(); if you want to download more rows than this you need to explicitly set this in the query. For example, if you wanted the first 150 rows you can simply add this query into the URL.\nurl_150r \u0026lt;- paste0(url, \u0026quot;\u0026amp;limit=150\u0026quot;)\rdz2011_list_150r \u0026lt;- fromJSON(url_150r)\rdz2011_150r \u0026lt;- dz2011_list_150r$result$records\rglimpse(dz2011_150r, width = 50)\r# Observations: 150\r# Variables: 97\r# $ `_id` \u0026lt;int\u0026gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 1...\r# $ Year \u0026lt;int\u0026gt; 2011, 2011, 2011, 2011, 2011...\r# $ DZ2011 \u0026lt;chr\u0026gt; \u0026quot;S92000003\u0026quot;, \u0026quot;S92000003\u0026quot;, \u0026quot;S...\r# $ DZ2011QF \u0026lt;chr\u0026gt; \u0026quot;d\u0026quot;, \u0026quot;d\u0026quot;, \u0026quot; \u0026quot;, \u0026quot; \u0026quot;, \u0026quot; \u0026quot;, \u0026quot; \u0026quot;...\r# $ Sex \u0026lt;chr\u0026gt; \u0026quot;Male\u0026quot;, \u0026quot;Female\u0026quot;, \u0026quot;Male\u0026quot;, \u0026quot;F...\r# $ AllAges \u0026lt;int\u0026gt; 2570300, 2729600, 419, 463, ...\r# $ Age0 \u0026lt;int\u0026gt; 30877, 29488, 3, 10, 4, 4, 9...\r# $ Age1 \u0026lt;int\u0026gt; 29388, 28294, 5, 8, 6, 0, 3,...\r# $ Age2 \u0026lt;int\u0026gt; 30189, 29190, 5, 7, 1, 3, 4,...\r# $ Age3 \u0026lt;int\u0026gt; 30173, 29061, 5, 7, 5, 6, 1,...\rI am not yet sure how to set up the query in Custom JSON so that it just downloads all the records but I suppose you could just set the limit to a very high number that you know will cover everything.\n\rQuerying with SQL\rTo query with SQL you will obviously need to know how to write SQL queries. I won’t be discussing SQL queries here as the focus is on using the CKAN API. For SQL, the URL should take the form\nhttps://www.opendata.nhs.scot/api/3/action/ +\ndatastore_search_sql? +\nsql= +\nyour-SQL-query\nThere are a couple of quirks about how to make SQL query work in R. You need to enclose the name of the resource ID in speech marks (“resource-ID”) so if like me, your default method of creating strings is to use speech marks rather than the apostrophe character (’), you will need to escape the speech mark using the backslash (\\\"). Similarly, you need to enclose other things such as variable names in speech marks when making more complicated queries. You also need to percent-encode your special characters to make them work as a URL – luckily the URLencode() function makes this easy!\n# Download the whole dataset using a SQL query\rurl_sql \u0026lt;- paste0(\u0026quot;https://www.opendata.nhs.scot/api/3/action/\u0026quot;,\r\u0026quot;datastore_search_sql?\u0026quot;,\r\u0026quot;sql=\u0026quot;,\rURLencode(\u0026quot;SELECT * from \\\u0026quot;c505f490-c201-44bd-abd1-1bd7a64285ee\\\u0026quot;\u0026quot;))\rdz2011_list_sql \u0026lt;- fromJSON(url_sql)\rdz2011_sql \u0026lt;- dz2011_list_sql$result$records\rglimpse(dz2011_sql, width = 50)\r# Observations: 97,678\r# Variables: 98\r# $ Age28 \u0026lt;chr\u0026gt; \u0026quot;33649\u0026quot;, \u0026quot;35002\u0026quot;, \u0026quot;12\u0026quot;, \u0026quot;6\u0026quot;, \u0026quot;6...\r# $ Age29 \u0026lt;chr\u0026gt; \u0026quot;33865\u0026quot;, \u0026quot;35698\u0026quot;, \u0026quot;8\u0026quot;, \u0026quot;10\u0026quot;, \u0026quot;1...\r# $ Age26 \u0026lt;chr\u0026gt; \u0026quot;34410\u0026quot;, \u0026quot;35491\u0026quot;, \u0026quot;6\u0026quot;, \u0026quot;11\u0026quot;, \u0026quot;1...\r# $ Age27 \u0026lt;chr\u0026gt; \u0026quot;33302\u0026quot;, \u0026quot;34274\u0026quot;, \u0026quot;11\u0026quot;, \u0026quot;7\u0026quot;, \u0026quot;5...\r# $ Age24 \u0026lt;chr\u0026gt; \u0026quot;35129\u0026quot;, \u0026quot;36098\u0026quot;, \u0026quot;9\u0026quot;, \u0026quot;7\u0026quot;, \u0026quot;1\u0026quot;...\r# $ Age25 \u0026lt;chr\u0026gt; \u0026quot;35166\u0026quot;, \u0026quot;35492\u0026quot;, \u0026quot;6\u0026quot;, \u0026quot;6\u0026quot;, \u0026quot;2\u0026quot;...\r# $ Age22 \u0026lt;chr\u0026gt; \u0026quot;36117\u0026quot;, \u0026quot;36450\u0026quot;, \u0026quot;6\u0026quot;, \u0026quot;3\u0026quot;, \u0026quot;3\u0026quot;...\r# $ Age23 \u0026lt;chr\u0026gt; \u0026quot;36710\u0026quot;, \u0026quot;37038\u0026quot;, \u0026quot;4\u0026quot;, \u0026quot;3\u0026quot;, \u0026quot;3\u0026quot;...\r# $ Age20 \u0026lt;chr\u0026gt; \u0026quot;37785\u0026quot;, \u0026quot;37513\u0026quot;, \u0026quot;5\u0026quot;, \u0026quot;3\u0026quot;, \u0026quot;6\u0026quot;...\r# $ Age21 \u0026lt;chr\u0026gt; \u0026quot;36354\u0026quot;, \u0026quot;36386\u0026quot;, \u0026quot;3\u0026quot;, \u0026quot;9\u0026quot;, \u0026quot;4\u0026quot;...\rNotice that when you use SQL to query CKAN, all 97,678 records are downloaded from the dataset (unless you explicitly tell it not to) so therefore, the query took much longer to finish. The data has been extracted but with a couple of strange issues. The variables are in a weird order and there are 98 variables here instead of the 97 we got previously – it seems to have extracted a variable called _full_text. I don’t know why it does this but I suppose these issues can be sorted out easily enough with some dplyr. Let’s also make a query to download just one variable to demonstrate how to write a marginally more complicated SQL query.\n# Download only the DZ2011 variable\rurl_sql_1v \u0026lt;- paste0(\u0026quot;https://www.opendata.nhs.scot/api/3/action/\u0026quot;,\r\u0026quot;datastore_search_sql?\u0026quot;,\r\u0026quot;sql=\u0026quot;,\rURLencode(\u0026quot;SELECT \\\u0026quot;DZ2011\\\u0026quot; from \\\u0026quot;c505f490-c201-44bd-abd1-1bd7a64285ee\\\u0026quot;\u0026quot;))\rdz2011_list_1v \u0026lt;- fromJSON(url_sql_1v)\rdz2011_1v \u0026lt;- dz2011_list_1v$result$records\rglimpse(dz2011_1v, width = 50)\r# Observations: 97,678\r# Variables: 1\r# $ DZ2011 \u0026lt;chr\u0026gt; \u0026quot;S92000003\u0026quot;, \u0026quot;S92000003\u0026quot;, \u0026quot;S01...\rNo issues with this query and everything was extracted as expected.\n\r\rConclusions and Further Ideas\rThis post has given a little bit of background to open data in Scotland as well as an introduction to downloading NHS Scotland open data directly into R using simple queries with the CKAN API but there are, of course, much fancier things that you can do when constructing queries (e.g. joins on datasets using SQL or using the API to search CKAN for datasets with a particular tag) which I’ve not covered. I may cover some of these in a future post but for now, the interested reader can trawl through the CKAN user guide to find out more about features like that! As a final point, I think it would be neat to write some wrapper functions in R to make it easier to make queries to CKAN (this could even be packaged up) – it might be a future project! I envision that this would work similarly to the opendatascot package which has been built to help with extracting data from statistics.gov.scot. Anyway that’s for another day.\n\r","date":1559692800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1559692800,"objectID":"7149297561a91e05356ef3976d28d8f9","permalink":"/post/ckan-api/","publishdate":"2019-06-05T00:00:00Z","relpermalink":"/post/ckan-api/","section":"post","summary":"Preamble\rOpen Data in Scotland\rQuerying CKAN\rQuerying with Custom JSON\rQuerying with SQL\r\rConclusions and Further Ideas\r\r\rPreamble\rI’ve got lots of rough pieces of R code written as I’ve been exploring/testing various things in the past. A lot of this is currently stored in a pretty disorganised fashion so I thought it would be a good idea to start writing some of these up into blog posts – at the very least, this should make it easier for me to find things later!","tags":["open-data","API"],"title":"Getting Open Data into R from CKAN","type":"post"},{"authors":null,"categories":["R"],"content":"\rI am very excited to hear that there are attempts to create a brand new R user group in Glasgow! I had just talked in Post Number One about my guilt at not having been able to attend EdinbR as often as I wished but it should be much easier for me to find time to attend a group based in Glasgow. If you are based in (or near) Glasgow and would like to join the R community, this sounds like the place to be – I hope this idea takes off! This is the blurb from their meetup page.\n\rThis group is for people who use R (or want to start to). This meetup is a first attempt to get together people in Glasgow interested in R, meet and decide how to go about the organisation. There are several R User around the world and would be nice to ave one in Glasgow as well.\n\r","date":1558396800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1558396800,"objectID":"b4706a8411ad127cef0837c154b12b9c","permalink":"/post/glasgow-r-user-group/","publishdate":"2019-05-21T00:00:00Z","relpermalink":"/post/glasgow-r-user-group/","section":"post","summary":"I am very excited to hear that there are attempts to create a brand new R user group in Glasgow! I had just talked in Post Number One about my guilt at not having been able to attend EdinbR as often as I wished but it should be much easier for me to find time to attend a group based in Glasgow. If you are based in (or near) Glasgow and would like to join the R community, this sounds like the place to be – I hope this idea takes off!","tags":["R-events"],"title":"Glasgow R User Group","type":"post"},{"authors":null,"categories":null,"content":"","date":1558224000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1558224000,"objectID":"299a077dcf7d88d57edc9080508f2dd4","permalink":"/bio/","publishdate":"2019-05-19T00:00:00Z","relpermalink":"/bio/","section":"","summary":"Biography","tags":null,"title":"Bio","type":"widget_page"},{"authors":null,"categories":["Personal"],"content":"\rI suppose this is my hello world post – I’ve never been good at getting my messages out there (I’m minimally active on social media, etc) but this is part of my attempt to rectify that a little. I have wanted to start a blog for a long time and in fact, I previously started one but failed to keep it going (hopefully this time it’ll be different!). I had called that one ‘Quietly Analysing’ which was mostly inspired from a quote by Ian Hacking in 1936.\n\rThe quiet statisticians have changed our world - not by discovering new facts or technical developments but by changing the ways we reason, experiment and form our opinions about it.\n\rIt’s still one of my favourite quotes about statistics but I won’t be continuing with that name as this will be more of a personal/professional website for myself. That blog no longer exists so this is effectively a new start for me. I intend to use this website as a place where I can refer others to my academic and analytical work/projects (e.g. at conferences and for current/future employers) but also as a place where I can write up things to aid my own learning and share with others. Occasionally I may write something personal. This point about writing is important as I’ve always felt that I need to get better at writing so hopefully just trying to do this more will help me improve.\nAs part of this, I am also hoping to contribute more as a member of the R community – a community that I have always found to be warm, friendly and welcoming. Since I am from Scotland I have to give a particular mention to EdinbR, who have been doing a great job of promoting R in Scotland (and I have to shamefully admit that I haven’t been able to be a part of as much as I wish).\nI am still fairly new to using web tools so still count myself as a beginner in this area and I’m basically learning as I go. Therefore, I really have to acknowledge some people who have created amazing tools and resources that have helped me immensely in getting this website up and running. I am very grateful to Yihui Xie for creating blogdown (and so many other fantastic tools such as RMarkdown and bookdown) which I am using to create this website; to George Cushen for the Hugo Academic template; to Alison Presmanes Hill, Amber Thomas and Leslie Myint for their useful tips in setting up with blogdown and the Hugo Academic template.\n","date":1558224000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1558224000,"objectID":"05d21a22b1d3ec6d5a2b8d40ed9054b5","permalink":"/post/post-number-one/","publishdate":"2019-05-19T00:00:00Z","relpermalink":"/post/post-number-one/","section":"post","summary":"I suppose this is my hello world post – I’ve never been good at getting my messages out there (I’m minimally active on social media, etc) but this is part of my attempt to rectify that a little. I have wanted to start a blog for a long time and in fact, I previously started one but failed to keep it going (hopefully this time it’ll be different!). I had called that one ‘Quietly Analysing’ which was mostly inspired from a quote by Ian Hacking in 1936.","tags":["blogdown"],"title":"Post Number One","type":"post"},{"authors":null,"categories":null,"content":"A short list of resources and tips to help with learning some R basics, with particular focus on the tidyverse.\n","date":1557187200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1557187200,"objectID":"ebd4532e37170e64dce6a691910d4cb0","permalink":"/project/r-resources-tips/","publishdate":"2019-05-07T00:00:00Z","relpermalink":"/project/r-resources-tips/","section":"project","summary":"A short list of resources and tips to help with learning some R basics, with particular focus on the tidyverse.","tags":["R","training","tidyverse","bookdown"],"title":"R Training Resources and Tips","type":"project"},{"authors":["Andrew McAuley","Alan Yeung","Avril Taylor","Sharon Hutchinson","David Goldberg","Alison Munro"],"categories":null,"content":"","date":1554076800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1554076800,"objectID":"f3271044d70efa814415c7cf65bb0804","permalink":"/publication/journal-article_nps_hcv/","publishdate":"2019-04-01T00:00:00Z","relpermalink":"/publication/journal-article_nps_hcv/","section":"publication","summary":"This study provides one of the first epidemiological analyses of the association between NPS injecting and HCV among a population level sample of PWID.","tags":["NPS","HCV"],"title":"Emergence of Novel Psychoactive Substance injecting associated with rapid rise in the population prevalence of hepatitis C virus","type":"publication"},{"authors":null,"categories":null,"content":"","date":1554076800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1554076800,"objectID":"fd921ee0cff4a5b6d797c8cbfdcc08f9","permalink":"/project/phiproject/","publishdate":"2019-04-01T00:00:00Z","relpermalink":"/project/phiproject/","section":"project","summary":"An RStudio project template incorporating some best practices.","tags":["R","RStudio"],"title":"phiproject","type":"project"},{"authors":[],"categories":null,"content":"\rredoc is an R package by Noam Ross that enables a two-way R Markdown-Microsoft Word workflow. It generates Word documents that can be de-rendered back into R Markdown, retaining edits on the Word document, including tracked changes.\n\rUPDATE: redoc was updated on May 5, 2019 so some aspects of the talk are now out-of-date. For example undoc() has been replaced by dedoc() and redoc_diff() lets you view changes more easily.\n","date":1553598000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1553598000,"objectID":"8f74dc77ac4858075f49e0bdccdc9acb","permalink":"/talk/redoc/","publishdate":"2019-03-26T00:00:00Z","relpermalink":"/talk/redoc/","section":"talk","summary":"A quick summary and demo of my experience of using the redoc package.","tags":[],"title":"Redoc","type":"talk"},{"authors":null,"categories":null,"content":"","date":1551830400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1551830400,"objectID":"b494bfc6cf4b9df782f9445003c40739","permalink":"/project/objectremover/","publishdate":"2019-03-06T00:00:00Z","relpermalink":"/project/objectremover/","section":"project","summary":"An RStudio addin to assist with removing objects from the global environment. Features include removing objects according to name patterns and object type.","tags":["R","RStudio"],"title":"objectremover RStudio Addin","type":"project"},{"authors":["Health Protection Scotland","Information Services Division"],"categories":null,"content":"The Report was prepared by a writing committee stemming from Scotland’s National HIV PrEP Coordinating Group. It has been written on behalf of the National Coordination Group and its subgroups (see Appendix 1 of the report for details).\nMy main contributions to the report were to chapter 5: Evaluating the Impact of HIV PrEP.\n","date":1551139200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1551139200,"objectID":"951fb3c140d9d5fdddafaa2946870698","permalink":"/publication/report-hiv_prep_year_one/","publishdate":"2019-02-26T00:00:00Z","relpermalink":"/publication/report-hiv_prep_year_one/","section":"publication","summary":"This report looks at the first year of the HIV PrEP programme in Scotland, covering the period from July 2017 to June 2018.","tags":["HIV"],"title":"Implementation of HIV PrEP in Scotland: First Year Report","type":"publication"},{"authors":null,"categories":null,"content":"Any original content created by me for this website such as blog posts are licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License.\n","date":1530140400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1530140400,"objectID":"18d05a63a1c8d7ed973cc51838494e41","permalink":"/privacy/","publishdate":"2018-06-28T00:00:00+01:00","relpermalink":"/privacy/","section":"","summary":"Any original content created by me for this website such as blog posts are licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License.","tags":null,"title":"Privacy Policy","type":"page"},{"authors":["Norah Palmateer","David Goldberg","Alison Munro","Avril Taylor","Alan Yeung","Lesley Wallace","Alan Mitchell","Samantha Shepherd","Rory Gunson","Celia Aitken","Sharon Hutchinson"],"categories":null,"content":"","date":1500076800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1500076800,"objectID":"7a52a8ecfd7427e070b7f48b8e66a7ce","permalink":"/publication/journal-article_hbv_prison/","publishdate":"2017-07-15T00:00:00Z","relpermalink":"/publication/journal-article_hbv_prison/","section":"publication","summary":"This study examines the impact of the HBV vaccination programme for prisoners in Scotland among people who inject drugs (PWID) in the community","tags":["HBV","PWID","prison","vaccination"],"title":"Association between universal hepatitis B prison vaccination, vaccine uptake and hepatitis B infection among people who inject drugs","type":"publication"},{"authors":["Alan Yeung","Amanda Weir","Hannah Austin","Kirsty Morrison","Donald Inverarity","Jim Sherval","Naomi Henderson","Shruti Joshi","Roisin Ure","Andrew McAuley"],"categories":null,"content":"","date":1497052800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1497052800,"objectID":"3ede482164159232eb5e36a91b30baab","permalink":"/publication/journal-article_nps_tcdo/","publishdate":"2017-06-10T00:00:00Z","relpermalink":"/publication/journal-article_nps_tcdo/","section":"publication","summary":"In April 2015, the UK government enacted a temporary class drug order (TCDO) on ethylphenidate in response to reported harms associated with its use, in particular an outbreak of infections among people who inject drugs (PWID) in Lothian, Scotland.","tags":["NPS","PWID","time-series"],"title":"Assessing the impact of a temporary class drug order on ethylphenidate-related infections among people who inject drugs in Lothian, Scotland: an interrupted time-series analysis","type":"publication"},{"authors":["Lesley Wallace","Alan Yeung","Kirsten Trayner","Beth Cullen","Kate Templeton","Celia Aitken","Sharon Hutchinson","David Goldberg"],"categories":null,"content":"","date":1484611200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1484611200,"objectID":"e539e8ca253c8b89f047ed2947f1496a","permalink":"/publication/report-hbv2015_hps/","publishdate":"2017-01-17T00:00:00Z","relpermalink":"/publication/report-hbv2015_hps/","section":"publication","summary":"This report looks at the epidemiology of hepatitis B in Scotland up to 2015.","tags":["HBV"],"title":"Hepatitis B infection in Scotland: 2015","type":"publication"},{"authors":["Alan Yeung","Chris Robertson"],"categories":null,"content":" Chapter List:  Introduction Tuberculosis in Scotland  Finding Potential Strain Clusters  Characteristics of 2009 Pandemic Influenza in Scotland Methods of Estimating Reproductive Numbers (Literature Review) Estimation of Reproductive Numbers for 2009 Pandemic Influenza in Scotland  Spatial Method  Studies of Influenza Vaccine Effectiveness (Literature Review) Influenza Vaccine Effectiveness in Scotland  Season 2011-12 and 2012-13  Conclusions  ","date":1469318400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1469318400,"objectID":"3bbaff791be1d67f99d1269bde41adc9","permalink":"/publication/phd-thesis/","publishdate":"2016-07-24T00:00:00Z","relpermalink":"/publication/phd-thesis/","section":"publication","summary":"This thesis applies and develops statistical methods to studies of vaccine-preventable disease outbreaks in Scotland and aims to aid in the detection and management of outbreaks.","tags":["statistics","vaccination"],"title":"Statistical Applications in the Analysis of Vaccine Preventable Diseases","type":"publication"}]